<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# processrunner

```go
import "github.com/aaronlmathis/gosight-agent/internal/processes/processrunner"
```

## Index

- [type ProcessRunner](<#ProcessRunner>)
  - [func NewRunner\(ctx context.Context, cfg \*config.Config, baseMeta \*model.Meta\) \(\*ProcessRunner, error\)](<#NewRunner>)
  - [func \(r \*ProcessRunner\) Close\(\)](<#ProcessRunner.Close>)
  - [func \(r \*ProcessRunner\) Run\(ctx context.Context\)](<#ProcessRunner.Run>)
  - [func \(r \*ProcessRunner\) SetDisconnectHandler\(fn func\(\)\)](<#ProcessRunner.SetDisconnectHandler>)


<a name="ProcessRunner"></a>
## type [ProcessRunner](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/processes/processrunner/processrunner.go#L44-L48>)

ProcessRunner is a struct that handles the collection and sending of process data. It manages the process collection interval, the task queue, and the process sender. It implements the Run method to start the collection process and the Close method to clean up resources.

```go
type ProcessRunner struct {
    Config        *config.Config
    ProcessSender *processsender.ProcessSender
    Meta          *model.Meta
}
```

<a name="NewRunner"></a>
### func [NewRunner](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/processes/processrunner/processrunner.go#L53>)

```go
func NewRunner(ctx context.Context, cfg *config.Config, baseMeta *model.Meta) (*ProcessRunner, error)
```

NewRunner creates a new ProcessRunner instance. It initializes the process sender and sets up the context for the runner. It returns a pointer to the ProcessRunner and an error if any occurs during initialization.

<a name="ProcessRunner.Close"></a>
### func \(\*ProcessRunner\) [Close](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/processes/processrunner/processrunner.go#L76>)

```go
func (r *ProcessRunner) Close()
```

Close closes the process sender and cleans up resources. It ensures that all resources are released and the connection to the server is properly closed. This method should be called when the process runner is no longer needed.

<a name="ProcessRunner.Run"></a>
### func \(\*ProcessRunner\) [Run](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/processes/processrunner/processrunner.go#L88>)

```go
func (r *ProcessRunner) Run(ctx context.Context)
```

Run starts the process collection and sending loop. It collects process data at the specified interval and sends it to the server. The method runs indefinitely until the context is done or an error occurs. It uses a ticker to trigger the collection process at regular intervals. The collected process data is sent to a task queue, which is processed by a worker pool. The worker pool is managed by the ProcessSender, which handles the sending of data to the server.

<a name="ProcessRunner.SetDisconnectHandler"></a>
### func \(\*ProcessRunner\) [SetDisconnectHandler](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/processes/processrunner/processrunner.go#L68>)

```go
func (r *ProcessRunner) SetDisconnectHandler(fn func())
```

SetDisconnectHandler sets a handler function to be called when the process sender disconnects. This allows the user to define custom behavior when the connection to the server is lost. The handler function will be called when the disconnect event occurs.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
