<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# container

```go
import "github.com/aaronlmathis/gosight-agent/internal/metrics/metriccollector/container"
```

## Index

- [func ExtractAllDockerMetrics\(stats types.StatsJSON, dims map\[string\]string, ts time.Time\) \[\]model.Metric](<#ExtractAllDockerMetrics>)
- [type DockerCollector](<#DockerCollector>)
  - [func NewDockerCollector\(\) \*DockerCollector](<#NewDockerCollector>)
  - [func \(c \*DockerCollector\) Collect\(ctx context.Context\) \(\[\]model.Metric, error\)](<#DockerCollector.Collect>)
  - [func \(c \*DockerCollector\) Name\(\) string](<#DockerCollector.Name>)
- [type PodmanCollector](<#PodmanCollector>)
  - [func NewPodmanCollector\(\) \*PodmanCollector](<#NewPodmanCollector>)
  - [func NewPodmanCollectorWithSocket\(path string\) \*PodmanCollector](<#NewPodmanCollectorWithSocket>)
  - [func \(c \*PodmanCollector\) Collect\(\_ context.Context\) \(\[\]model.Metric, error\)](<#PodmanCollector.Collect>)
  - [func \(c \*PodmanCollector\) Name\(\) string](<#PodmanCollector.Name>)
- [type PodmanContainer](<#PodmanContainer>)
- [type PodmanInspect](<#PodmanInspect>)
- [type PodmanStats](<#PodmanStats>)
- [type PortMapping](<#PortMapping>)


<a name="ExtractAllDockerMetrics"></a>
## func [ExtractAllDockerMetrics](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/docker.go#L150>)

```go
func ExtractAllDockerMetrics(stats types.StatsJSON, dims map[string]string, ts time.Time) []model.Metric
```

ExtractAllDockerMetrics extracts all Docker metrics from the given stats and returns them as a slice of model.Metric. It includes CPU, memory, network, and block I/O metrics. The metrics are tagged with the provided dimensions and timestamp. This function is used to collect detailed metrics for each container. It is called from the Collect method after retrieving the container stats.

<a name="DockerCollector"></a>
## type [DockerCollector](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/docker.go#L42-L44>)



```go
type DockerCollector struct {
    // contains filtered or unexported fields
}
```

<a name="NewDockerCollector"></a>
### func [NewDockerCollector](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/docker.go#L49>)

```go
func NewDockerCollector() *DockerCollector
```

NewDockerCollector creates a new Docker collector It initializes the Docker client using environment variables and API version negotiation.

<a name="DockerCollector.Collect"></a>
### func \(\*DockerCollector\) [Collect](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/docker.go#L66>)

```go
func (c *DockerCollector) Collect(ctx context.Context) ([]model.Metric, error)
```

Collect retrieves metrics from Docker containers It uses the Docker API to get a list of containers and their stats. It returns a slice of metrics that can be sent to the server.

<a name="DockerCollector.Name"></a>
### func \(\*DockerCollector\) [Name](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/docker.go#L59>)

```go
func (c *DockerCollector) Name() string
```

Name returns the name of the collector This is used to identify the collector in logs and metrics.

<a name="PodmanCollector"></a>
## type [PodmanCollector](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L43-L45>)

PodmanCollector collects metrics from Podman containers. It uses the Podman API to fetch container stats and metadata.

```go
type PodmanCollector struct {
    SocketPath string
}
```

<a name="NewPodmanCollector"></a>
### func [NewPodmanCollector](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L124>)

```go
func NewPodmanCollector() *PodmanCollector
```

NewPodmanCollector creates a new PodmanCollector with the default socket path. The default socket path is "/run/podman/podman.sock".

<a name="NewPodmanCollectorWithSocket"></a>
### func [NewPodmanCollectorWithSocket](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L131>)

```go
func NewPodmanCollectorWithSocket(path string) *PodmanCollector
```

NewPodmanCollectorWithSocket creates a new PodmanCollector with a custom socket path. This is useful for testing or if the Podman socket is located in a different path. The socket path should be the full path to the Podman socket file.

<a name="PodmanCollector.Collect"></a>
### func \(\*PodmanCollector\) [Collect](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L146>)

```go
func (c *PodmanCollector) Collect(_ context.Context) ([]model.Metric, error)
```

Collect fetches container metrics from the Podman API. It returns a slice of model.Metric containing the collected metrics. If an error occurs during the collection process, it returns the error. The metrics include CPU usage, memory usage, network statistics, and container state.

<a name="PodmanCollector.Name"></a>
### func \(\*PodmanCollector\) [Name](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L138>)

```go
func (c *PodmanCollector) Name() string
```

Name returns the name of the collector. This is used for logging and debugging purposes. It returns "podman" for the PodmanCollector.

<a name="PodmanContainer"></a>
## type [PodmanContainer](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L57-L66>)

PodmanContainer represents a Podman container. It contains metadata about the container, including its ID, name, image, state, labels, and ports. The ID is a unique identifier for the container. The Names field contains the names of the container. The Image field contains the name of the image used to create the container. The State field indicates the current state of the container \(e.g., running, stopped\). The Labels field contains key\-value pairs of labels associated with the container. The Ports field contains a list of port mappings for the container. The Mounts field contains information about the mounts used by the container. The StartedAt field contains the time when the container was started.

```go
type PodmanContainer struct {
    ID        string            `json:"Id"`
    Names     []string          `json:"Names"`
    Image     string            `json:"Image"`
    State     string            `json:"State"`
    Labels    map[string]string `json:"Labels"`
    Ports     []PortMapping     `json:"Ports"`
    Mounts    []any             `json:"Mounts"`
    StartedAt time.Time
}
```

<a name="PodmanInspect"></a>
## type [PodmanInspect](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L74-L78>)

PodmanInspect represents the inspect data for a Podman container. It contains the state of the container, including the time when it was started. The State field contains information about the container's state. The StartedAt field contains the time when the container was started. The State field is a nested struct that contains the StartedAt field. The StartedAt field is a string in RFC3339 format.

```go
type PodmanInspect struct {
    State struct {
        StartedAt string `json:"StartedAt"`
    } `json:"State"`
}
```

<a name="PodmanStats"></a>
## type [PodmanStats](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L88-L109>)



```go
type PodmanStats struct {
    Read     string `json:"read"`
    Name     string `json:"name"`
    ID       string `json:"id"`
    CPUStats struct {
        CPUUsage struct {
            TotalUsage        uint64 `json:"total_usage"`
            UsageInKernelmode uint64 `json:"usage_in_kernelmode"`
            UsageInUsermode   uint64 `json:"usage_in_usermode"`
        }   `json:"cpu_usage"`
        SystemCPUUsage uint64 `json:"system_cpu_usage"`
        OnlineCPUs     int    `json:"online_cpus"`
    }   `json:"cpu_stats"`
    MemoryStats struct {
        Usage uint64 `json:"usage_bytes"`
        Limit uint64 `json:"limit_bytes"`
    }   `json:"memory_stats"`
    Networks map[string]struct {
        RxBytes uint64 `json:"rx_bytes"`
        TxBytes uint64 `json:"tx_bytes"`
    }   `json:"networks"`
}
```

<a name="PortMapping"></a>
## type [PortMapping](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/metrics/metriccollector/container/podman.go#L116-L120>)

PortMapping represents a port mapping for a Podman container. It contains the private port, public port, and type of mapping. The PrivatePort field contains the private port number. The PublicPort field contains the public port number. The Type field contains the type of mapping \(e.g., tcp, udp\).

```go
type PortMapping struct {
    PrivatePort int    `json:"PrivatePort"`
    PublicPort  int    `json:"PublicPort"`
    Type        string `json:"Type"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
