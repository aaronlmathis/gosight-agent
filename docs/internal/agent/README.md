<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# gosightagent

```go
import "github.com/aaronlmathis/gosight-agent/internal/agent"
```

Package agent provides the main functionality for the GoSight agent. It handles the initialization and management of various components such as metrics, logs, and processes. The agent is responsible for collecting data from the system and sending it to the GoSight server. It also manages the agent's identity and configuration.

internal/agent/doc.go Package gosightagent is responsible for initializing and managing the Agent lifecycle. It wires together config, metric runner, log runner, and metadata generation.

## Index

- [type Agent](<#Agent>)
  - [func NewAgent\(ctx context.Context, cfg \*config.Config, agentVersion string\) \(\*Agent, error\)](<#NewAgent>)
  - [func \(a \*Agent\) Close\(\)](<#Agent.Close>)
  - [func \(a \*Agent\) Start\(ctx context.Context\)](<#Agent.Start>)


<a name="Agent"></a>
## type [Agent](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/agent/agent.go#L50-L59>)

Agent is a struct that represents the GoSight agent. It contains the configuration, metric runner, log runner, process runner, agent ID, agent version, and metadata.

```go
type Agent struct {
    Config        *config.Config
    MetricRunner  *metricrunner.MetricRunner
    AgentID       string
    AgentVersion  string
    LogRunner     *logrunner.LogRunner
    ProcessRunner *processrunner.ProcessRunner
    Meta          *model.Meta
    Ctx           context.Context
}
```

<a name="NewAgent"></a>
### func [NewAgent](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/agent/agent.go#L66>)

```go
func NewAgent(ctx context.Context, cfg *config.Config, agentVersion string) (*Agent, error)
```

NewAgent creates a new instance of the GoSight agent. It initializes the agent with the provided configuration, context, and agent version. It retrieves the agent ID and builds the base metadata for the agent. It also creates instances of the metric runner, log runner, and process runner. If any of these steps fail, it returns an error.

<a name="Agent.Close"></a>
### func \(\*Agent\) [Close](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/agent/agent.go#L123>)

```go
func (a *Agent) Close()
```

Close stops all runners and closes the gRPC connection. It waits for all runners to finish before closing the connection.

<a name="Agent.Start"></a>
### func \(\*Agent\) [Start](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/agent/agent.go#L107>)

```go
func (a *Agent) Start(ctx context.Context)
```

Start initializes and starts the metric, log, and process runners. It runs each runner in a separate goroutine. The context is used to manage the lifecycle of the runners. The function logs the start of each runner and handles any errors that may occur.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
