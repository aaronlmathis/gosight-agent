<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# agentutils

```go
import "github.com/aaronlmathis/gosight-agent/internal/utils"
```

SPDX\-License\-Identifier: GPL\-3.0\-or\-later

Copyright \(C\) 2025 Aaron Mathis aaron.mathis@gmail.com

This file is part of GoSight.

GoSight is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or \(at your option\) any later version.

GoSight is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with GoSight. If not, see https://www.gnu.org/licenses/.

agent/internal/utils/cursor.go

## Index

- [func ErrMsg\(err error\) string](<#ErrMsg>)
- [func GetHostname\(\) string](<#GetHostname>)
- [func Keys\(m map\[string\]bool\) \[\]string](<#Keys>)
- [func LoadCursor\(path string\) \(string, error\)](<#LoadCursor>)
- [func LoadTLSConfig\(cfg \*config.Config\) \(\*tls.Config, error\)](<#LoadTLSConfig>)
- [func Metric\(ns, sub, name string, value interface\{\}, typ, unit string, dims map\[string\]string, ts time.Time\) model.Metric](<#Metric>)
- [func SaveCursor\(path, cursor string\) error](<#SaveCursor>)
- [func ToFloat64\(v interface\{\}\) float64](<#ToFloat64>)


<a name="ErrMsg"></a>
## func [ErrMsg](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/sys_utils.go#L88>)

```go
func ErrMsg(err error) string
```

ErrMsg returns the error message if err is not nil, otherwise returns an empty string.

<a name="GetHostname"></a>
## func [GetHostname](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/sys_utils.go#L79>)

```go
func GetHostname() string
```

GetHostname returns the system hostname, or "unknown" if it can't be determined.

<a name="Keys"></a>
## func [Keys](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/sys_utils.go#L97>)

```go
func Keys(m map[string]bool) []string
```

Keys returns a slice of keys from the given map\[string\]bool. It iterates over the map and appends each key to a slice.

<a name="LoadCursor"></a>
## func [LoadCursor](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/cursor.go#L31>)

```go
func LoadCursor(path string) (string, error)
```

LoadCursor reads the last saved journald cursor from a file. It returns an empty string and nil error if the file does not exist.

<a name="LoadTLSConfig"></a>
## func [LoadTLSConfig](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/tls.go#L40>)

```go
func LoadTLSConfig(cfg *config.Config) (*tls.Config, error)
```

LoadTLSConfig loads the TLS configuration for the agent. It reads the CA certificate and client certificate/key from the specified paths. It returns a tls.Config object that can be used for secure communication.

<a name="Metric"></a>
## func [Metric](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/sys_utils.go#L41>)

```go
func Metric(ns, sub, name string, value interface{}, typ, unit string, dims map[string]string, ts time.Time) model.Metric
```

Metric creates a new model.Metric instance with the provided parameters. It sets the namespace, sub\-namespace, name, value, type, unit, dimensions, and timestamp for the metric. The value is converted to a float64 using the ToFloat64 function. The function returns the created model.Metric instance.

<a name="SaveCursor"></a>
## func [SaveCursor](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/cursor.go#L43>)

```go
func SaveCursor(path, cursor string) error
```

SaveCursor writes the given journald cursor to a file.

<a name="ToFloat64"></a>
## func [ToFloat64](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/utils/sys_utils.go#L58>)

```go
func ToFloat64(v interface{}) float64
```

ToFloat64 converts a given value to float64. It handles various numeric types such as float64, int, uint64, uint32, int64, and int32. If the value is of an unknown type, it logs a warning and returns 0.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
