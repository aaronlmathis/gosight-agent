<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# grpcconn

```go
import "github.com/aaronlmathis/gosight-agent/internal/grpc"
```

agent/internal/grpc/connection.go Package grpcconn provides a singleton gRPC connection for the GoSight agent.

internal/grpc/doc.go Package grpcconn manages the gRPC connection and stream between agent and server.

## Index

- [func CloseGRPCConn\(\) error](<#CloseGRPCConn>)
- [func DisconnectNotify\(\) \<\-chan struct\{\}](<#DisconnectNotify>)
- [func GetGRPCConn\(cfg \*config.Config\) \(\*grpc.ClientConn, error\)](<#GetGRPCConn>)
- [func GetPauseUntil\(\) time.Time](<#GetPauseUntil>)
- [func PauseConnections\(d time.Duration\)](<#PauseConnections>)
- [func WaitForResume\(\)](<#WaitForResume>)


<a name="CloseGRPCConn"></a>
## func [CloseGRPCConn](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/grpc/connection.go#L105>)

```go
func CloseGRPCConn() error
```

CloseGRPCConn closes the connection \(for shutdown\)

<a name="DisconnectNotify"></a>
## func [DisconnectNotify](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/grpc/connection.go#L163>)

```go
func DisconnectNotify() <-chan struct{}
```

DisconnectNotify returns the channel that will get one event each time PauseConnections is called.

<a name="GetGRPCConn"></a>
## func [GetGRPCConn](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/grpc/connection.go#L57>)

```go
func GetGRPCConn(cfg *config.Config) (*grpc.ClientConn, error)
```

GetGRPCConn returns the singleton ClientConn for the gRPC connection. It creates a new connection if one does not already exist. The connection is configured with TLS and various gRPC options. It is safe for concurrent use. Note: This function does not block until the connection is established.

<a name="GetPauseUntil"></a>
## func [GetPauseUntil](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/grpc/connection.go#L116>)

```go
func GetPauseUntil() time.Time
```



<a name="PauseConnections"></a>
## func [PauseConnections](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/grpc/connection.go#L125>)

```go
func PauseConnections(d time.Duration)
```

PauseConnections schedules a global pause of duration d, and broadcasts one “disconnect” event on disconnectCh.

<a name="WaitForResume"></a>
## func [WaitForResume](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/grpc/connection.go#L146>)

```go
func WaitForResume()
```

WaitForResume blocks until time.Now\(\) ≥ pauseUntil. Even if pauseUntil was extended mid\-sleep, this will re\-check.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
