<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# logsender

```go
import "github.com/aaronlmathis/gosight-agent/internal/logs/logsender"
```

internal/logs/logsender/doc.go Package logsender contains log sending

## Index

- [type LogSender](<#LogSender>)
  - [func NewSender\(ctx context.Context, cfg \*config.Config\) \(\*LogSender, error\)](<#NewSender>)
  - [func \(s \*LogSender\) Close\(\) error](<#LogSender.Close>)
  - [func \(s \*LogSender\) SendLogs\(payload \*model.LogPayload\) error](<#LogSender.SendLogs>)
  - [func \(s \*LogSender\) StartWorkerPool\(ctx context.Context, queue \<\-chan \*model.LogPayload, workerCount int\)](<#LogSender.StartWorkerPool>)


<a name="LogSender"></a>
## type [LogSender](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/logs/logsender/sender.go#L22-L29>)

LogSender holds the gRPC client, connection, and stream.

```go
type LogSender struct {
    // contains filtered or unexported fields
}
```

<a name="NewSender"></a>
### func [NewSender](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/logs/logsender/sender.go#L33>)

```go
func NewSender(ctx context.Context, cfg *config.Config) (*LogSender, error)
```

NewSender initializes a new LogSender and starts the connection manager. It returns immediately and launches the background connection manager.

<a name="LogSender.Close"></a>
### func \(\*LogSender\) [Close](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/logs/logsender/sender.go#L166>)

```go
func (s *LogSender) Close() error
```

Close shuts down worker pool and closes the gRPC connection.

<a name="LogSender.SendLogs"></a>
### func \(\*LogSender\) [SendLogs](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/logs/logsender/sender.go#L113>)

```go
func (s *LogSender) SendLogs(payload *model.LogPayload) error
```

SendLogs marshals the LogPayload and sends it. If no active stream, returns Unavailable so your worker backoff kicks in.

<a name="LogSender.StartWorkerPool"></a>
### func \(\*LogSender\) [StartWorkerPool](<https://github.com/aaronlmathis/gosight-agent/blob/main/internal/logs/logsender/task.go#L39>)

```go
func (s *LogSender) StartWorkerPool(ctx context.Context, queue <-chan *model.LogPayload, workerCount int)
```

StartWorkerPool launches N workers and processes metric payloads with retries in case of transient errors. Each worker will attempt to send the payload to the gRPC server. The number of workers is determined by the workerCount parameter. The workers will run until the context is done or an error occurs.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
